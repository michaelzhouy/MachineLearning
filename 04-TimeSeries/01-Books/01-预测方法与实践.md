

## 时间序列分解

### 时间序列成分
1. 加法
$$y_t = S_t + T_t + R_t$$
$y_t$表示时间序列数据, $S_t$表示季节项, $T_t$表示趋势-周期项, $R_t$表示残差项

2. 乘法
$$y_t = S_t \times T_t \times R_t$$

取对数

$$log \, y_t = log \, S_t + log \, T_t + log \, R_t$$

### 移动平均
1. 平滑移动平均: 时间点$t$的趋势-周期项的估计值是通过求$t$时刻的k周期内的平均得到的
$$\hat T_t = \frac{1}{m}\sum_{j=-k}^{k}y_{t+j}$$
其中$m=2k+1$

2. 移动平均的移动平均

$2 \times 4-MA$写成如下形式

$$\hat T_t = \frac{1}{2}[\frac{1}{4}(y_{t-2}+y_{t-1}+y_t+y_{t+1}) + \frac{1}{4}(y_{t-1}+y_{t}+y_{t+1}+y_{t+2})] =\\
\frac{1}{8}y_{t-2} + \frac{1}{4}y_{t-1} + \frac{1}{4}y_{t} + \frac{1}{4}y_{t+1} + \frac{1}{8}y_{t+2}$$

### 经典时间序列分解
1. 加法分解
- 若$m$为偶数, 用$2 \times m-MA$来计算趋势周期项$\hat T_t$. 若$m$为奇数, 用$m-MA$来计算趋势周期项$\hat T_t$
- 计算去趋势序列: $y_t-\hat T_t$
- 为了估计每个季度的季节项, 简单平均那个季度的去趋势值. 例如, 对于月度数据, 三月份的季节项是对所有去除趋势后的三月份的值的平均. 然后将这些季节项进行调整, 使得它们的加和为0. 季节项是通过将这些各年的数据排列结合在一起而得到的, 即$\hat S_t$
- 残差项是通过时间序列减去估计的季节项和趋势-周期项求得的: $\hat R_t = y_t - \hat T_t - \hat S_t$

2. 乘法分解
- 若$m$为偶数, 用$2 \times m-MA$来计算趋势周期项$\hat T_t$. 若$m$为奇数, 用$m-MA$来计算趋势周期项$\hat T_t$
- 计算去趋势序列: $y_t/\hat T_t$
- 为了估计每个季度的季节项, 简单平均那个季度的去趋势值. 例如, 对于月度数据, 三月份的季节项是对所有去除趋势后的三月份的值的平均. 然后将这些季节项进行调整, 使得它们的加和为0. 季节项是通过将这些各年的数据排列结合在一起而得到的, 即$\hat S_t$
- 残差项是通过时间序列除以估计的季节项和趋势-周期项求得的: $\hat R_t = y_t / (\hat T_t \hat S_t)$


## 指数平滑

### 简单的指数平滑
1. 朴素预测法
$$\hat y_{T+h|T} = y_T$$

2. 平均预测法
$$\hat y_{T+h|T} = \frac{1}{T}\sum_{t=1}^{T}y_t$$

3. 简单指数平滑: 向前一步$T+1$时刻的预测值是时间系列$y_1,...,y_T$中所有观察值的加权平均值. 权重下降的速度由参数$\alpha$控制
$$\hat y_{T+1|T} = \alpha \, y_T + \alpha \, (1 - \alpha) \, y_{T-1} + \alpha \, (1 - \alpha)^2 \, y_{T-2} + \alpha \, (1 - \alpha)^3 \, y_{T-3} + ...$$
其中$0<=\alpha<=1$是平滑参数

### 趋势法
1. Holt的线性趋势